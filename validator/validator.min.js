var Validator=function(){var c=[];var a;var d;var f=function(h){if(typeof h=="function"){a=h}};var g=function(h){if(typeof h=="function"){d=h}};var b=function(i,h){c.push({form:$(i),url:h})};var e=function(){var h;for(var j=0 in c){form=c[j];h=form.form;h.on("submit",handleFormSubmit)}};var find=function(m){var l=null;for(var k=0 in c){if(c[k].form.attr("id")==m){l=c[k];break}}return l};var extractError=function(q){var p=[];for(var o in q){for(var n in q[o]){p.push(q[o][n])}}return p.join("\n")};var callSuccess=function(i,n){i.trigger("reset");if(a){a.apply(this,[i,n])}else{alert(n)}};var callFail=function(n,i){if(d){d.apply(this,[n,i])}else{alert(i)}};var handleFormSubmit=function(n){n.preventDefault();var p=$(this).attr("id");var o=find(p);var i;if(o){i=o.form;$.ajax(o.url,{method:"POST",dataType:"json",data:i.serialize(),complete:function(s,t){var q;try{q=JSON.parse(s.responseText)}catch(r){alert("Ocorreu um erro, tente novamente mais tarde.");return false}if(s.status==200){callSuccess(i,q.success.mail)}else{if(s.status==400||s.status==406){callFail(i,extractError(q.errors))}else{console.log("Unknow Error :(")}}}})}return false};return{init:e,addFormElement:b,onFail:g,onSuccess:f}};